{"dependencies":[{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":94},"end":{"line":3,"column":69,"index":163}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"requestNotificationPermissions\", {\n    enumerable: true,\n    get: function () {\n      return requestNotificationPermissions;\n    }\n  });\n  Object.defineProperty(exports, \"getNotificationSettings\", {\n    enumerable: true,\n    get: function () {\n      return getNotificationSettings;\n    }\n  });\n  Object.defineProperty(exports, \"saveNotificationSettings\", {\n    enumerable: true,\n    get: function () {\n      return saveNotificationSettings;\n    }\n  });\n  Object.defineProperty(exports, \"scheduleDailyNotification\", {\n    enumerable: true,\n    get: function () {\n      return scheduleDailyNotification;\n    }\n  });\n  Object.defineProperty(exports, \"cancelAllNotifications\", {\n    enumerable: true,\n    get: function () {\n      return cancelAllNotifications;\n    }\n  });\n  Object.defineProperty(exports, \"shouldSendNotification\", {\n    enumerable: true,\n    get: function () {\n      return shouldSendNotification;\n    }\n  });\n  var _expoNotifications = require(_dependencyMap[0], \"expo-notifications\");\n  var Notifications = _interopNamespace(_expoNotifications);\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  const NOTIFICATION_SETTINGS_KEY = '@onething_notification_settings';\n  // Configure notification behavior\n  Notifications.setNotificationHandler({\n    handleNotification: async () => ({\n      shouldShowAlert: true,\n      shouldPlaySound: false,\n      shouldSetBadge: false\n    })\n  });\n\n  // Request permissions\n  const requestNotificationPermissions = async () => {\n    try {\n      const {\n        status: existingStatus\n      } = await Notifications.getPermissionsAsync();\n      let finalStatus = existingStatus;\n      if (existingStatus !== 'granted') {\n        const {\n          status\n        } = await Notifications.requestPermissionsAsync();\n        finalStatus = status;\n      }\n      return finalStatus === 'granted';\n    } catch (error) {\n      console.error('Error requesting notification permissions:', error);\n      return false;\n    }\n  };\n\n  // Get notification settings\n  const getNotificationSettings = async () => {\n    try {\n      const jsonValue = await AsyncStorage.default.getItem(NOTIFICATION_SETTINGS_KEY);\n      if (jsonValue != null) {\n        return JSON.parse(jsonValue);\n      }\n    } catch (e) {\n      console.error('Error reading notification settings:', e);\n    }\n\n    // Default settings: disabled, 9:00 AM\n    return {\n      enabled: false,\n      hour: 9,\n      minute: 0\n    };\n  };\n\n  // Save notification settings\n  const saveNotificationSettings = async settings => {\n    try {\n      const jsonValue = JSON.stringify(settings);\n      await AsyncStorage.default.setItem(NOTIFICATION_SETTINGS_KEY, jsonValue);\n    } catch (e) {\n      console.error('Error saving notification settings:', e);\n      throw e;\n    }\n  };\n\n  // Schedule daily notification\n  const scheduleDailyNotification = async (hour, minute) => {\n    try {\n      // Cancel existing notifications\n      await Notifications.cancelAllScheduledNotificationsAsync();\n\n      // Gentle notification messages\n      const messages = [\"A quiet question is waiting, if you want.\", \"Today's question is here.\", \"One small pause, whenever you're ready.\"];\n      const randomMessage = messages[Math.floor(Math.random() * messages.length)];\n\n      // Schedule notification\n      await Notifications.scheduleNotificationAsync({\n        content: {\n          title: 'OneThing',\n          body: randomMessage,\n          sound: false\n        },\n        trigger: {\n          hour,\n          minute,\n          repeats: true\n        }\n      });\n    } catch (error) {\n      console.error('Error scheduling notification:', error);\n      throw error;\n    }\n  };\n\n  // Cancel all notifications\n  const cancelAllNotifications = async () => {\n    try {\n      await Notifications.cancelAllScheduledNotificationsAsync();\n    } catch (error) {\n      console.error('Error canceling notifications:', error);\n      throw error;\n    }\n  };\n\n  // Check if user has already answered today (to avoid sending notification)\n  const shouldSendNotification = async hasAnsweredToday => {\n    const settings = await getNotificationSettings();\n    return settings.enabled && !hasAnsweredToday;\n  };\n});","lineCount":171,"map":[[27,2,23,0,"Object"],[27,8,23,0],[27,9,23,0,"defineProperty"],[27,23,23,0],[27,24,23,0,"exports"],[27,31,23,0],[28,4,23,0,"enumerable"],[28,14,23,0],[29,4,23,0,"get"],[29,7,23,0],[29,18,23,0,"get"],[29,19,23,0],[30,6,23,0],[30,13,23,0,"requestNotificationPermissions"],[30,43,23,0],[31,4,23,0],[32,2,23,0],[33,2,41,0,"Object"],[33,8,41,0],[33,9,41,0,"defineProperty"],[33,23,41,0],[33,24,41,0,"exports"],[33,31,41,0],[34,4,41,0,"enumerable"],[34,14,41,0],[35,4,41,0,"get"],[35,7,41,0],[35,18,41,0,"get"],[35,19,41,0],[36,6,41,0],[36,13,41,0,"getNotificationSettings"],[36,36,41,0],[37,4,41,0],[38,2,41,0],[39,2,60,0,"Object"],[39,8,60,0],[39,9,60,0,"defineProperty"],[39,23,60,0],[39,24,60,0,"exports"],[39,31,60,0],[40,4,60,0,"enumerable"],[40,14,60,0],[41,4,60,0,"get"],[41,7,60,0],[41,18,60,0,"get"],[41,19,60,0],[42,6,60,0],[42,13,60,0,"saveNotificationSettings"],[42,37,60,0],[43,4,60,0],[44,2,60,0],[45,2,73,0,"Object"],[45,8,73,0],[45,9,73,0,"defineProperty"],[45,23,73,0],[45,24,73,0,"exports"],[45,31,73,0],[46,4,73,0,"enumerable"],[46,14,73,0],[47,4,73,0,"get"],[47,7,73,0],[47,18,73,0,"get"],[47,19,73,0],[48,6,73,0],[48,13,73,0,"scheduleDailyNotification"],[48,38,73,0],[49,4,73,0],[50,2,73,0],[51,2,110,0,"Object"],[51,8,110,0],[51,9,110,0,"defineProperty"],[51,23,110,0],[51,24,110,0,"exports"],[51,31,110,0],[52,4,110,0,"enumerable"],[52,14,110,0],[53,4,110,0,"get"],[53,7,110,0],[53,18,110,0,"get"],[53,19,110,0],[54,6,110,0],[54,13,110,0,"cancelAllNotifications"],[54,35,110,0],[55,4,110,0],[56,2,110,0],[57,2,120,0,"Object"],[57,8,120,0],[57,9,120,0,"defineProperty"],[57,23,120,0],[57,24,120,0,"exports"],[57,31,120,0],[58,4,120,0,"enumerable"],[58,14,120,0],[59,4,120,0,"get"],[59,7,120,0],[59,18,120,0,"get"],[59,19,120,0],[60,6,120,0],[60,13,120,0,"shouldSendNotification"],[60,35,120,0],[61,4,120,0],[62,2,120,0],[63,2,1,0],[63,6,1,0,"_expoNotifications"],[63,24,1,0],[63,27,1,0,"require"],[63,34,1,0],[63,35,1,0,"_dependencyMap"],[63,49,1,0],[64,2,1,0],[64,6,1,0,"Notifications"],[64,19,1,0],[64,22,1,0,"_interopNamespace"],[64,39,1,0],[64,40,1,0,"_expoNotifications"],[64,58,1,0],[65,2,3,0],[65,6,3,0,"_reactNativeAsyncStorageAsyncStorage"],[65,42,3,0],[65,45,3,0,"require"],[65,52,3,0],[65,53,3,0,"_dependencyMap"],[65,67,3,0],[66,2,3,0],[66,6,3,0,"AsyncStorage"],[66,18,3,0],[66,21,3,0,"_interopDefault"],[66,36,3,0],[66,37,3,0,"_reactNativeAsyncStorageAsyncStorage"],[66,73,3,0],[67,2,5,0],[67,8,5,6,"NOTIFICATION_SETTINGS_KEY"],[67,33,5,31],[67,36,5,34],[67,69,5,67],[68,2,13,0],[69,2,14,0,"Notifications"],[69,15,14,13],[69,16,14,14,"setNotificationHandler"],[69,38,14,36],[69,39,14,37],[70,4,15,2,"handleNotification"],[70,22,15,20],[70,24,15,22],[70,30,15,22,"handleNotification"],[70,31,15,22],[70,37,15,35],[71,6,16,4,"shouldShowAlert"],[71,21,16,19],[71,23,16,21],[71,27,16,25],[72,6,17,4,"shouldPlaySound"],[72,21,17,19],[72,23,17,21],[72,28,17,26],[73,6,18,4,"shouldSetBadge"],[73,20,18,18],[73,22,18,20],[74,4,19,2],[74,5,19,3],[75,2,20,0],[75,3,20,1],[75,4,20,2],[77,2,22,0],[78,2,23,7],[78,8,23,13,"requestNotificationPermissions"],[78,38,23,43],[78,41,23,46],[78,47,23,46,"requestNotificationPermissions"],[78,48,23,46],[78,53,23,76],[79,4,24,2],[79,8,24,6],[80,6,25,4],[80,12,25,10],[81,8,25,12,"status"],[81,14,25,18],[81,16,25,20,"existingStatus"],[82,6,25,35],[82,7,25,36],[82,10,25,39],[82,16,25,45,"Notifications"],[82,29,25,58],[82,30,25,59,"getPermissionsAsync"],[82,49,25,78],[82,50,25,79],[82,51,25,80],[83,6,26,4],[83,10,26,8,"finalStatus"],[83,21,26,19],[83,24,26,22,"existingStatus"],[83,38,26,36],[84,6,28,4],[84,10,28,8,"existingStatus"],[84,24,28,22],[84,29,28,27],[84,38,28,36],[84,40,28,38],[85,8,29,6],[85,14,29,12],[86,10,29,14,"status"],[87,8,29,21],[87,9,29,22],[87,12,29,25],[87,18,29,31,"Notifications"],[87,31,29,44],[87,32,29,45,"requestPermissionsAsync"],[87,55,29,68],[87,56,29,69],[87,57,29,70],[88,8,30,6,"finalStatus"],[88,19,30,17],[88,22,30,20,"status"],[88,28,30,26],[89,6,31,4],[90,6,33,4],[90,13,33,11,"finalStatus"],[90,24,33,22],[90,29,33,27],[90,38,33,36],[91,4,34,2],[91,5,34,3],[91,6,34,4],[91,13,34,11,"error"],[91,18,34,16],[91,20,34,18],[92,6,35,4,"console"],[92,13,35,11],[92,14,35,12,"error"],[92,19,35,17],[92,20,35,18],[92,64,35,62],[92,66,35,64,"error"],[92,71,35,69],[92,72,35,70],[93,6,36,4],[93,13,36,11],[93,18,36,16],[94,4,37,2],[95,2,38,0],[95,3,38,1],[97,2,40,0],[98,2,41,7],[98,8,41,13,"getNotificationSettings"],[98,31,41,36],[98,34,41,39],[98,40,41,39,"getNotificationSettings"],[98,41,41,39],[98,46,41,82],[99,4,42,2],[99,8,42,6],[100,6,43,4],[100,12,43,10,"jsonValue"],[100,21,43,19],[100,24,43,22],[100,30,43,28,"AsyncStorage"],[100,42,43,40],[100,43,43,40,"default"],[100,50,43,40],[100,51,43,41,"getItem"],[100,58,43,48],[100,59,43,49,"NOTIFICATION_SETTINGS_KEY"],[100,84,43,74],[100,85,43,75],[101,6,44,4],[101,10,44,8,"jsonValue"],[101,19,44,17],[101,23,44,21],[101,27,44,25],[101,29,44,27],[102,8,45,6],[102,15,45,13,"JSON"],[102,19,45,17],[102,20,45,18,"parse"],[102,25,45,23],[102,26,45,24,"jsonValue"],[102,35,45,33],[102,36,45,34],[103,6,46,4],[104,4,47,2],[104,5,47,3],[104,6,47,4],[104,13,47,11,"e"],[104,14,47,12],[104,16,47,14],[105,6,48,4,"console"],[105,13,48,11],[105,14,48,12,"error"],[105,19,48,17],[105,20,48,18],[105,58,48,56],[105,60,48,58,"e"],[105,61,48,59],[105,62,48,60],[106,4,49,2],[108,4,51,2],[109,4,52,2],[109,11,52,9],[110,6,53,4,"enabled"],[110,13,53,11],[110,15,53,13],[110,20,53,18],[111,6,54,4,"hour"],[111,10,54,8],[111,12,54,10],[111,13,54,11],[112,6,55,4,"minute"],[112,12,55,10],[112,14,55,12],[113,4,56,2],[113,5,56,3],[114,2,57,0],[114,3,57,1],[116,2,59,0],[117,2,60,7],[117,8,60,13,"saveNotificationSettings"],[117,32,60,37],[117,35,60,40],[117,41,61,2,"settings"],[117,49,61,32],[117,53,62,20],[118,4,63,2],[118,8,63,6],[119,6,64,4],[119,12,64,10,"jsonValue"],[119,21,64,19],[119,24,64,22,"JSON"],[119,28,64,26],[119,29,64,27,"stringify"],[119,38,64,36],[119,39,64,37,"settings"],[119,47,64,45],[119,48,64,46],[120,6,65,4],[120,12,65,10,"AsyncStorage"],[120,24,65,22],[120,25,65,22,"default"],[120,32,65,22],[120,33,65,23,"setItem"],[120,40,65,30],[120,41,65,31,"NOTIFICATION_SETTINGS_KEY"],[120,66,65,56],[120,68,65,58,"jsonValue"],[120,77,65,67],[120,78,65,68],[121,4,66,2],[121,5,66,3],[121,6,66,4],[121,13,66,11,"e"],[121,14,66,12],[121,16,66,14],[122,6,67,4,"console"],[122,13,67,11],[122,14,67,12,"error"],[122,19,67,17],[122,20,67,18],[122,57,67,55],[122,59,67,57,"e"],[122,60,67,58],[122,61,67,59],[123,6,68,4],[123,12,68,10,"e"],[123,13,68,11],[124,4,69,2],[125,2,70,0],[125,3,70,1],[127,2,72,0],[128,2,73,7],[128,8,73,13,"scheduleDailyNotification"],[128,33,73,38],[128,36,73,41],[128,42,73,41,"scheduleDailyNotification"],[128,43,74,2,"hour"],[128,47,74,14],[128,49,75,2,"minute"],[128,55,75,16],[128,60,76,20],[129,4,77,2],[129,8,77,6],[130,6,78,4],[131,6,79,4],[131,12,79,10,"Notifications"],[131,25,79,23],[131,26,79,24,"cancelAllScheduledNotificationsAsync"],[131,62,79,60],[131,63,79,61],[131,64,79,62],[133,6,81,4],[134,6,82,4],[134,12,82,10,"messages"],[134,20,82,18],[134,23,82,21],[134,24,83,6],[134,67,83,49],[134,69,84,6],[134,96,84,33],[134,98,85,6],[134,139,85,47],[134,140,86,5],[135,6,88,4],[135,12,88,10,"randomMessage"],[135,25,88,23],[135,28,88,26,"messages"],[135,36,88,34],[135,37,88,35,"Math"],[135,41,88,39],[135,42,88,40,"floor"],[135,47,88,45],[135,48,88,46,"Math"],[135,52,88,50],[135,53,88,51,"random"],[135,59,88,57],[135,60,88,58],[135,61,88,59],[135,64,88,62,"messages"],[135,72,88,70],[135,73,88,71,"length"],[135,79,88,77],[135,80,88,78],[135,81,88,79],[137,6,90,4],[138,6,91,4],[138,12,91,10,"Notifications"],[138,25,91,23],[138,26,91,24,"scheduleNotificationAsync"],[138,51,91,49],[138,52,91,50],[139,8,92,6,"content"],[139,15,92,13],[139,17,92,15],[140,10,93,8,"title"],[140,15,93,13],[140,17,93,15],[140,27,93,25],[141,10,94,8,"body"],[141,14,94,12],[141,16,94,14,"randomMessage"],[141,29,94,27],[142,10,95,8,"sound"],[142,15,95,13],[142,17,95,15],[143,8,96,6],[143,9,96,7],[144,8,97,6,"trigger"],[144,15,97,13],[144,17,97,15],[145,10,98,8,"hour"],[145,14,98,12],[146,10,99,8,"minute"],[146,16,99,14],[147,10,100,8,"repeats"],[147,17,100,15],[147,19,100,17],[148,8,101,6],[149,6,102,4],[149,7,102,5],[149,8,102,6],[150,4,103,2],[150,5,103,3],[150,6,103,4],[150,13,103,11,"error"],[150,18,103,16],[150,20,103,18],[151,6,104,4,"console"],[151,13,104,11],[151,14,104,12,"error"],[151,19,104,17],[151,20,104,18],[151,52,104,50],[151,54,104,52,"error"],[151,59,104,57],[151,60,104,58],[152,6,105,4],[152,12,105,10,"error"],[152,17,105,15],[153,4,106,2],[154,2,107,0],[154,3,107,1],[156,2,109,0],[157,2,110,7],[157,8,110,13,"cancelAllNotifications"],[157,30,110,35],[157,33,110,38],[157,39,110,38,"cancelAllNotifications"],[157,40,110,38],[157,45,110,65],[158,4,111,2],[158,8,111,6],[159,6,112,4],[159,12,112,10,"Notifications"],[159,25,112,23],[159,26,112,24,"cancelAllScheduledNotificationsAsync"],[159,62,112,60],[159,63,112,61],[159,64,112,62],[160,4,113,2],[160,5,113,3],[160,6,113,4],[160,13,113,11,"error"],[160,18,113,16],[160,20,113,18],[161,6,114,4,"console"],[161,13,114,11],[161,14,114,12,"error"],[161,19,114,17],[161,20,114,18],[161,52,114,50],[161,54,114,52,"error"],[161,59,114,57],[161,60,114,58],[162,6,115,4],[162,12,115,10,"error"],[162,17,115,15],[163,4,116,2],[164,2,117,0],[164,3,117,1],[166,2,119,0],[167,2,120,7],[167,8,120,13,"shouldSendNotification"],[167,30,120,35],[167,33,120,38],[167,39,121,2,"hasAnsweredToday"],[167,55,121,27],[167,59,122,23],[168,4,123,2],[168,10,123,8,"settings"],[168,18,123,16],[168,21,123,19],[168,27,123,25,"getNotificationSettings"],[168,50,123,48],[168,51,123,49],[168,52,123,50],[169,4,124,2],[169,11,124,9,"settings"],[169,19,124,17],[169,20,124,18,"enabled"],[169,27,124,25],[169,31,124,29],[169,32,124,30,"hasAnsweredToday"],[169,48,124,46],[170,2,125,0],[170,3,125,1],[171,0,125,2],[171,3]],"functionMap":{"names":["<global>","Notifications.setNotificationHandler$argument_0.handleNotification","requestNotificationPermissions","getNotificationSettings","saveNotificationSettings","scheduleDailyNotification","cancelAllNotifications","shouldSendNotification"],"mappings":"AAA;sBCc;IDI;8CEI;CFe;uCGG;CHgB;wCIG;CJU;yCKG;CLkC;sCMG;CNO;sCOG;CPK"},"hasCjsExports":false},"type":"js/module"}]}