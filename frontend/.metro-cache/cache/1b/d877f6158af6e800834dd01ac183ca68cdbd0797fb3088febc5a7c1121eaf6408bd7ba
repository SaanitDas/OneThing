{"dependencies":[{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":94},"end":{"line":3,"column":69,"index":163}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"requestNotificationPermissions\", {\n    enumerable: true,\n    get: function () {\n      return requestNotificationPermissions;\n    }\n  });\n  Object.defineProperty(exports, \"getNotificationSettings\", {\n    enumerable: true,\n    get: function () {\n      return getNotificationSettings;\n    }\n  });\n  Object.defineProperty(exports, \"saveNotificationSettings\", {\n    enumerable: true,\n    get: function () {\n      return saveNotificationSettings;\n    }\n  });\n  Object.defineProperty(exports, \"scheduleDailyNotification\", {\n    enumerable: true,\n    get: function () {\n      return scheduleDailyNotification;\n    }\n  });\n  Object.defineProperty(exports, \"cancelAllNotifications\", {\n    enumerable: true,\n    get: function () {\n      return cancelAllNotifications;\n    }\n  });\n  Object.defineProperty(exports, \"shouldSendNotification\", {\n    enumerable: true,\n    get: function () {\n      return shouldSendNotification;\n    }\n  });\n  var _expoNotifications = require(_dependencyMap[0], \"expo-notifications\");\n  var Notifications = _interopNamespace(_expoNotifications);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[1], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  const NOTIFICATION_SETTINGS_KEY = '@onething_notification_settings';\n  // Configure notification behavior\n  Notifications.setNotificationHandler({\n    handleNotification: async () => ({\n      shouldShowAlert: true,\n      shouldPlaySound: false,\n      shouldSetBadge: false\n    })\n  });\n\n  // Request permissions with proper Android 13+ handling\n  const requestNotificationPermissions = async () => {\n    try {\n      // Check current permission status\n      const {\n        status: existingStatus\n      } = await Notifications.getPermissionsAsync();\n      let finalStatus = existingStatus;\n      console.log('Current notification permission status:', existingStatus);\n\n      // If not granted, request permission\n      if (existingStatus !== 'granted') {\n        const {\n          status\n        } = await Notifications.requestPermissionsAsync();\n        finalStatus = status;\n        console.log('New notification permission status:', finalStatus);\n      }\n\n      // For Android 13+, also check POST_NOTIFICATIONS permission\n      if (Platform.default.OS === 'android' && finalStatus === 'granted') {\n        console.log('Notification permission granted successfully');\n      }\n      return finalStatus === 'granted';\n    } catch (error) {\n      console.error('Error requesting notification permissions:', error);\n      return false;\n    }\n  };\n\n  // Get notification settings\n  const getNotificationSettings = async () => {\n    try {\n      const jsonValue = await AsyncStorage.default.getItem(NOTIFICATION_SETTINGS_KEY);\n      if (jsonValue != null) {\n        return JSON.parse(jsonValue);\n      }\n    } catch (e) {\n      console.error('Error reading notification settings:', e);\n    }\n\n    // Default settings: disabled, 9:00 AM\n    return {\n      enabled: false,\n      hour: 9,\n      minute: 0\n    };\n  };\n\n  // Save notification settings\n  const saveNotificationSettings = async settings => {\n    try {\n      const jsonValue = JSON.stringify(settings);\n      await AsyncStorage.default.setItem(NOTIFICATION_SETTINGS_KEY, jsonValue);\n    } catch (e) {\n      console.error('Error saving notification settings:', e);\n      throw e;\n    }\n  };\n\n  // Schedule daily notification\n  const scheduleDailyNotification = async (hour, minute) => {\n    try {\n      // Cancel existing notifications\n      await Notifications.cancelAllScheduledNotificationsAsync();\n\n      // Gentle notification messages\n      const messages = [\"A quiet question is waiting, if you want.\", \"Today's question is here.\", \"One small pause, whenever you're ready.\"];\n      const randomMessage = messages[Math.floor(Math.random() * messages.length)];\n\n      // Schedule notification\n      await Notifications.scheduleNotificationAsync({\n        content: {\n          title: 'OneThing',\n          body: randomMessage,\n          sound: false\n        },\n        trigger: {\n          hour,\n          minute,\n          repeats: true\n        }\n      });\n    } catch (error) {\n      console.error('Error scheduling notification:', error);\n      throw error;\n    }\n  };\n\n  // Cancel all notifications\n  const cancelAllNotifications = async () => {\n    try {\n      await Notifications.cancelAllScheduledNotificationsAsync();\n    } catch (error) {\n      console.error('Error canceling notifications:', error);\n      throw error;\n    }\n  };\n\n  // Check if user has already answered today (to avoid sending notification)\n  const shouldSendNotification = async hasAnsweredToday => {\n    const settings = await getNotificationSettings();\n    return settings.enabled && !hasAnsweredToday;\n  };\n});","lineCount":183,"map":[[27,2,23,0,"Object"],[27,8,23,0],[27,9,23,0,"defineProperty"],[27,23,23,0],[27,24,23,0,"exports"],[27,31,23,0],[28,4,23,0,"enumerable"],[28,14,23,0],[29,4,23,0,"get"],[29,7,23,0],[29,18,23,0,"get"],[29,19,23,0],[30,6,23,0],[30,13,23,0,"requestNotificationPermissions"],[30,43,23,0],[31,4,23,0],[32,2,23,0],[33,2,51,0,"Object"],[33,8,51,0],[33,9,51,0,"defineProperty"],[33,23,51,0],[33,24,51,0,"exports"],[33,31,51,0],[34,4,51,0,"enumerable"],[34,14,51,0],[35,4,51,0,"get"],[35,7,51,0],[35,18,51,0,"get"],[35,19,51,0],[36,6,51,0],[36,13,51,0,"getNotificationSettings"],[36,36,51,0],[37,4,51,0],[38,2,51,0],[39,2,70,0,"Object"],[39,8,70,0],[39,9,70,0,"defineProperty"],[39,23,70,0],[39,24,70,0,"exports"],[39,31,70,0],[40,4,70,0,"enumerable"],[40,14,70,0],[41,4,70,0,"get"],[41,7,70,0],[41,18,70,0,"get"],[41,19,70,0],[42,6,70,0],[42,13,70,0,"saveNotificationSettings"],[42,37,70,0],[43,4,70,0],[44,2,70,0],[45,2,83,0,"Object"],[45,8,83,0],[45,9,83,0,"defineProperty"],[45,23,83,0],[45,24,83,0,"exports"],[45,31,83,0],[46,4,83,0,"enumerable"],[46,14,83,0],[47,4,83,0,"get"],[47,7,83,0],[47,18,83,0,"get"],[47,19,83,0],[48,6,83,0],[48,13,83,0,"scheduleDailyNotification"],[48,38,83,0],[49,4,83,0],[50,2,83,0],[51,2,120,0,"Object"],[51,8,120,0],[51,9,120,0,"defineProperty"],[51,23,120,0],[51,24,120,0,"exports"],[51,31,120,0],[52,4,120,0,"enumerable"],[52,14,120,0],[53,4,120,0,"get"],[53,7,120,0],[53,18,120,0,"get"],[53,19,120,0],[54,6,120,0],[54,13,120,0,"cancelAllNotifications"],[54,35,120,0],[55,4,120,0],[56,2,120,0],[57,2,130,0,"Object"],[57,8,130,0],[57,9,130,0,"defineProperty"],[57,23,130,0],[57,24,130,0,"exports"],[57,31,130,0],[58,4,130,0,"enumerable"],[58,14,130,0],[59,4,130,0,"get"],[59,7,130,0],[59,18,130,0,"get"],[59,19,130,0],[60,6,130,0],[60,13,130,0,"shouldSendNotification"],[60,35,130,0],[61,4,130,0],[62,2,130,0],[63,2,1,0],[63,6,1,0,"_expoNotifications"],[63,24,1,0],[63,27,1,0,"require"],[63,34,1,0],[63,35,1,0,"_dependencyMap"],[63,49,1,0],[64,2,1,0],[64,6,1,0,"Notifications"],[64,19,1,0],[64,22,1,0,"_interopNamespace"],[64,39,1,0],[64,40,1,0,"_expoNotifications"],[64,58,1,0],[65,2,1,52],[65,6,1,52,"_reactNativeWebDistExportsPlatform"],[65,40,1,52],[65,43,1,52,"require"],[65,50,1,52],[65,51,1,52,"_dependencyMap"],[65,65,1,52],[66,2,1,52],[66,6,1,52,"Platform"],[66,14,1,52],[66,17,1,52,"_interopDefault"],[66,32,1,52],[66,33,1,52,"_reactNativeWebDistExportsPlatform"],[66,67,1,52],[67,2,3,0],[67,6,3,0,"_reactNativeAsyncStorageAsyncStorage"],[67,42,3,0],[67,45,3,0,"require"],[67,52,3,0],[67,53,3,0,"_dependencyMap"],[67,67,3,0],[68,2,3,0],[68,6,3,0,"AsyncStorage"],[68,18,3,0],[68,21,3,0,"_interopDefault"],[68,36,3,0],[68,37,3,0,"_reactNativeAsyncStorageAsyncStorage"],[68,73,3,0],[69,2,5,0],[69,8,5,6,"NOTIFICATION_SETTINGS_KEY"],[69,33,5,31],[69,36,5,34],[69,69,5,67],[70,2,13,0],[71,2,14,0,"Notifications"],[71,15,14,13],[71,16,14,14,"setNotificationHandler"],[71,38,14,36],[71,39,14,37],[72,4,15,2,"handleNotification"],[72,22,15,20],[72,24,15,22],[72,30,15,22,"handleNotification"],[72,31,15,22],[72,37,15,35],[73,6,16,4,"shouldShowAlert"],[73,21,16,19],[73,23,16,21],[73,27,16,25],[74,6,17,4,"shouldPlaySound"],[74,21,17,19],[74,23,17,21],[74,28,17,26],[75,6,18,4,"shouldSetBadge"],[75,20,18,18],[75,22,18,20],[76,4,19,2],[76,5,19,3],[77,2,20,0],[77,3,20,1],[77,4,20,2],[79,2,22,0],[80,2,23,7],[80,8,23,13,"requestNotificationPermissions"],[80,38,23,43],[80,41,23,46],[80,47,23,46,"requestNotificationPermissions"],[80,48,23,46],[80,53,23,76],[81,4,24,2],[81,8,24,6],[82,6,25,4],[83,6,26,4],[83,12,26,10],[84,8,26,12,"status"],[84,14,26,18],[84,16,26,20,"existingStatus"],[85,6,26,35],[85,7,26,36],[85,10,26,39],[85,16,26,45,"Notifications"],[85,29,26,58],[85,30,26,59,"getPermissionsAsync"],[85,49,26,78],[85,50,26,79],[85,51,26,80],[86,6,27,4],[86,10,27,8,"finalStatus"],[86,21,27,19],[86,24,27,22,"existingStatus"],[86,38,27,36],[87,6,29,4,"console"],[87,13,29,11],[87,14,29,12,"log"],[87,17,29,15],[87,18,29,16],[87,59,29,57],[87,61,29,59,"existingStatus"],[87,75,29,73],[87,76,29,74],[89,6,31,4],[90,6,32,4],[90,10,32,8,"existingStatus"],[90,24,32,22],[90,29,32,27],[90,38,32,36],[90,40,32,38],[91,8,33,6],[91,14,33,12],[92,10,33,14,"status"],[93,8,33,21],[93,9,33,22],[93,12,33,25],[93,18,33,31,"Notifications"],[93,31,33,44],[93,32,33,45,"requestPermissionsAsync"],[93,55,33,68],[93,56,33,69],[93,57,33,70],[94,8,34,6,"finalStatus"],[94,19,34,17],[94,22,34,20,"status"],[94,28,34,26],[95,8,35,6,"console"],[95,15,35,13],[95,16,35,14,"log"],[95,19,35,17],[95,20,35,18],[95,57,35,55],[95,59,35,57,"finalStatus"],[95,70,35,68],[95,71,35,69],[96,6,36,4],[98,6,38,4],[99,6,39,4],[99,10,39,8,"Platform"],[99,18,39,16],[99,19,39,16,"default"],[99,26,39,16],[99,27,39,17,"OS"],[99,29,39,19],[99,34,39,24],[99,43,39,33],[99,47,39,37,"finalStatus"],[99,58,39,48],[99,63,39,53],[99,72,39,62],[99,74,39,64],[100,8,40,6,"console"],[100,15,40,13],[100,16,40,14,"log"],[100,19,40,17],[100,20,40,18],[100,66,40,64],[100,67,40,65],[101,6,41,4],[102,6,43,4],[102,13,43,11,"finalStatus"],[102,24,43,22],[102,29,43,27],[102,38,43,36],[103,4,44,2],[103,5,44,3],[103,6,44,4],[103,13,44,11,"error"],[103,18,44,16],[103,20,44,18],[104,6,45,4,"console"],[104,13,45,11],[104,14,45,12,"error"],[104,19,45,17],[104,20,45,18],[104,64,45,62],[104,66,45,64,"error"],[104,71,45,69],[104,72,45,70],[105,6,46,4],[105,13,46,11],[105,18,46,16],[106,4,47,2],[107,2,48,0],[107,3,48,1],[109,2,50,0],[110,2,51,7],[110,8,51,13,"getNotificationSettings"],[110,31,51,36],[110,34,51,39],[110,40,51,39,"getNotificationSettings"],[110,41,51,39],[110,46,51,82],[111,4,52,2],[111,8,52,6],[112,6,53,4],[112,12,53,10,"jsonValue"],[112,21,53,19],[112,24,53,22],[112,30,53,28,"AsyncStorage"],[112,42,53,40],[112,43,53,40,"default"],[112,50,53,40],[112,51,53,41,"getItem"],[112,58,53,48],[112,59,53,49,"NOTIFICATION_SETTINGS_KEY"],[112,84,53,74],[112,85,53,75],[113,6,54,4],[113,10,54,8,"jsonValue"],[113,19,54,17],[113,23,54,21],[113,27,54,25],[113,29,54,27],[114,8,55,6],[114,15,55,13,"JSON"],[114,19,55,17],[114,20,55,18,"parse"],[114,25,55,23],[114,26,55,24,"jsonValue"],[114,35,55,33],[114,36,55,34],[115,6,56,4],[116,4,57,2],[116,5,57,3],[116,6,57,4],[116,13,57,11,"e"],[116,14,57,12],[116,16,57,14],[117,6,58,4,"console"],[117,13,58,11],[117,14,58,12,"error"],[117,19,58,17],[117,20,58,18],[117,58,58,56],[117,60,58,58,"e"],[117,61,58,59],[117,62,58,60],[118,4,59,2],[120,4,61,2],[121,4,62,2],[121,11,62,9],[122,6,63,4,"enabled"],[122,13,63,11],[122,15,63,13],[122,20,63,18],[123,6,64,4,"hour"],[123,10,64,8],[123,12,64,10],[123,13,64,11],[124,6,65,4,"minute"],[124,12,65,10],[124,14,65,12],[125,4,66,2],[125,5,66,3],[126,2,67,0],[126,3,67,1],[128,2,69,0],[129,2,70,7],[129,8,70,13,"saveNotificationSettings"],[129,32,70,37],[129,35,70,40],[129,41,71,2,"settings"],[129,49,71,32],[129,53,72,20],[130,4,73,2],[130,8,73,6],[131,6,74,4],[131,12,74,10,"jsonValue"],[131,21,74,19],[131,24,74,22,"JSON"],[131,28,74,26],[131,29,74,27,"stringify"],[131,38,74,36],[131,39,74,37,"settings"],[131,47,74,45],[131,48,74,46],[132,6,75,4],[132,12,75,10,"AsyncStorage"],[132,24,75,22],[132,25,75,22,"default"],[132,32,75,22],[132,33,75,23,"setItem"],[132,40,75,30],[132,41,75,31,"NOTIFICATION_SETTINGS_KEY"],[132,66,75,56],[132,68,75,58,"jsonValue"],[132,77,75,67],[132,78,75,68],[133,4,76,2],[133,5,76,3],[133,6,76,4],[133,13,76,11,"e"],[133,14,76,12],[133,16,76,14],[134,6,77,4,"console"],[134,13,77,11],[134,14,77,12,"error"],[134,19,77,17],[134,20,77,18],[134,57,77,55],[134,59,77,57,"e"],[134,60,77,58],[134,61,77,59],[135,6,78,4],[135,12,78,10,"e"],[135,13,78,11],[136,4,79,2],[137,2,80,0],[137,3,80,1],[139,2,82,0],[140,2,83,7],[140,8,83,13,"scheduleDailyNotification"],[140,33,83,38],[140,36,83,41],[140,42,83,41,"scheduleDailyNotification"],[140,43,84,2,"hour"],[140,47,84,14],[140,49,85,2,"minute"],[140,55,85,16],[140,60,86,20],[141,4,87,2],[141,8,87,6],[142,6,88,4],[143,6,89,4],[143,12,89,10,"Notifications"],[143,25,89,23],[143,26,89,24,"cancelAllScheduledNotificationsAsync"],[143,62,89,60],[143,63,89,61],[143,64,89,62],[145,6,91,4],[146,6,92,4],[146,12,92,10,"messages"],[146,20,92,18],[146,23,92,21],[146,24,93,6],[146,67,93,49],[146,69,94,6],[146,96,94,33],[146,98,95,6],[146,139,95,47],[146,140,96,5],[147,6,98,4],[147,12,98,10,"randomMessage"],[147,25,98,23],[147,28,98,26,"messages"],[147,36,98,34],[147,37,98,35,"Math"],[147,41,98,39],[147,42,98,40,"floor"],[147,47,98,45],[147,48,98,46,"Math"],[147,52,98,50],[147,53,98,51,"random"],[147,59,98,57],[147,60,98,58],[147,61,98,59],[147,64,98,62,"messages"],[147,72,98,70],[147,73,98,71,"length"],[147,79,98,77],[147,80,98,78],[147,81,98,79],[149,6,100,4],[150,6,101,4],[150,12,101,10,"Notifications"],[150,25,101,23],[150,26,101,24,"scheduleNotificationAsync"],[150,51,101,49],[150,52,101,50],[151,8,102,6,"content"],[151,15,102,13],[151,17,102,15],[152,10,103,8,"title"],[152,15,103,13],[152,17,103,15],[152,27,103,25],[153,10,104,8,"body"],[153,14,104,12],[153,16,104,14,"randomMessage"],[153,29,104,27],[154,10,105,8,"sound"],[154,15,105,13],[154,17,105,15],[155,8,106,6],[155,9,106,7],[156,8,107,6,"trigger"],[156,15,107,13],[156,17,107,15],[157,10,108,8,"hour"],[157,14,108,12],[158,10,109,8,"minute"],[158,16,109,14],[159,10,110,8,"repeats"],[159,17,110,15],[159,19,110,17],[160,8,111,6],[161,6,112,4],[161,7,112,5],[161,8,112,6],[162,4,113,2],[162,5,113,3],[162,6,113,4],[162,13,113,11,"error"],[162,18,113,16],[162,20,113,18],[163,6,114,4,"console"],[163,13,114,11],[163,14,114,12,"error"],[163,19,114,17],[163,20,114,18],[163,52,114,50],[163,54,114,52,"error"],[163,59,114,57],[163,60,114,58],[164,6,115,4],[164,12,115,10,"error"],[164,17,115,15],[165,4,116,2],[166,2,117,0],[166,3,117,1],[168,2,119,0],[169,2,120,7],[169,8,120,13,"cancelAllNotifications"],[169,30,120,35],[169,33,120,38],[169,39,120,38,"cancelAllNotifications"],[169,40,120,38],[169,45,120,65],[170,4,121,2],[170,8,121,6],[171,6,122,4],[171,12,122,10,"Notifications"],[171,25,122,23],[171,26,122,24,"cancelAllScheduledNotificationsAsync"],[171,62,122,60],[171,63,122,61],[171,64,122,62],[172,4,123,2],[172,5,123,3],[172,6,123,4],[172,13,123,11,"error"],[172,18,123,16],[172,20,123,18],[173,6,124,4,"console"],[173,13,124,11],[173,14,124,12,"error"],[173,19,124,17],[173,20,124,18],[173,52,124,50],[173,54,124,52,"error"],[173,59,124,57],[173,60,124,58],[174,6,125,4],[174,12,125,10,"error"],[174,17,125,15],[175,4,126,2],[176,2,127,0],[176,3,127,1],[178,2,129,0],[179,2,130,7],[179,8,130,13,"shouldSendNotification"],[179,30,130,35],[179,33,130,38],[179,39,131,2,"hasAnsweredToday"],[179,55,131,27],[179,59,132,23],[180,4,133,2],[180,10,133,8,"settings"],[180,18,133,16],[180,21,133,19],[180,27,133,25,"getNotificationSettings"],[180,50,133,48],[180,51,133,49],[180,52,133,50],[181,4,134,2],[181,11,134,9,"settings"],[181,19,134,17],[181,20,134,18,"enabled"],[181,27,134,25],[181,31,134,29],[181,32,134,30,"hasAnsweredToday"],[181,48,134,46],[182,2,135,0],[182,3,135,1],[183,0,135,2],[183,3]],"functionMap":{"names":["<global>","Notifications.setNotificationHandler$argument_0.handleNotification","requestNotificationPermissions","getNotificationSettings","saveNotificationSettings","scheduleDailyNotification","cancelAllNotifications","shouldSendNotification"],"mappings":"AAA;sBCc;IDI;8CEI;CFyB;uCGG;CHgB;wCIG;CJU;yCKG;CLkC;sCMG;CNO;sCOG;CPK"},"hasCjsExports":false},"type":"js/module"}]}